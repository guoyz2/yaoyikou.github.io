const n=JSON.parse('{"key":"v-c2c50018","path":"/%E5%89%8D%E7%AB%AF/js/%E8%B7%A8%E5%9F%9F%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92.html","title":"跨域传参处理","lang":"zh-CN","frontmatter":{"toc":true,"article":true,"editLink":false,"date":"2023-09-26T00:00:00.000Z","category":["前端","跨域","js"],"description":"跨域传参处理 为什么需要跨域传参？ 项目主站和管理端不是一个域名，但是老板要求主站跳管理端免登录。 为什么不用单点登录？ 老板要求快速完成，单点登录相对于 postMessage 成本较高。 发送端(主站) let url = \\"http://localhost:9002\\" const targetWindow = window.open(url,\\"_blank\\") setTimeout(() =&gt; { // 需要传递的数据，从本地缓存中获取 let token = localStorage.getItem(\\"token\\") let info = localStorage.getItem(\\"store\\") const message = JSON.stringify({token,info}); // 要传递的数据 targetWindow.postMessage(message, url); },100)","head":[["meta",{"property":"og:url","content":"https://xianyufs.top/%E5%89%8D%E7%AB%AF/js/%E8%B7%A8%E5%9F%9F%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"}],["meta",{"property":"og:site_name","content":"咸鱼要翻身"}],["meta",{"property":"og:title","content":"跨域传参处理"}],["meta",{"property":"og:description","content":"跨域传参处理 为什么需要跨域传参？ 项目主站和管理端不是一个域名，但是老板要求主站跳管理端免登录。 为什么不用单点登录？ 老板要求快速完成，单点登录相对于 postMessage 成本较高。 发送端(主站) let url = \\"http://localhost:9002\\" const targetWindow = window.open(url,\\"_blank\\") setTimeout(() =&gt; { // 需要传递的数据，从本地缓存中获取 let token = localStorage.getItem(\\"token\\") let info = localStorage.getItem(\\"store\\") const message = JSON.stringify({token,info}); // 要传递的数据 targetWindow.postMessage(message, url); },100)"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-09-27T10:16:33.000Z"}],["meta",{"property":"article:author","content":"guoyz"}],["meta",{"property":"article:published_time","content":"2023-09-26T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-09-27T10:16:33.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"跨域传参处理\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-09-26T00:00:00.000Z\\",\\"dateModified\\":\\"2023-09-27T10:16:33.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"guoyz\\",\\"url\\":\\"https://xianyufs.top\\",\\"email\\":\\"78300406@qq.com\\"}]}"]]},"headers":[],"git":{"createdTime":1695809793000,"updatedTime":1695809793000,"contributors":[{"name":"guoyz","email":"18733972792@163.com","commits":1}]},"readingTime":{"minutes":0.78,"words":234},"filePathRelative":"前端/js/跨域参数传递.md","localizedDate":"2023年9月26日","excerpt":"<h1> 跨域传参处理</h1>\\n<p>为什么需要跨域传参？<br>\\n项目主站和管理端不是一个域名，但是老板要求主站跳管理端免登录。<br>\\n为什么不用单点登录？<br>\\n老板要求快速完成，单点登录相对于 postMessage 成本较高。</p>\\n<p>发送端(主站)</p>\\n<div class=\\"language-javascript line-numbers-mode\\" data-ext=\\"js\\"><pre class=\\"language-javascript\\"><code><span class=\\"token keyword\\">let</span> url <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"http://localhost:9002\\"</span>\\n<span class=\\"token keyword\\">const</span> targetWindow <span class=\\"token operator\\">=</span> window<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">open</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">,</span><span class=\\"token string\\">\\"_blank\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token function\\">setTimeout</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token comment\\">// 需要传递的数据，从本地缓存中获取</span>\\n  <span class=\\"token keyword\\">let</span> token <span class=\\"token operator\\">=</span> localStorage<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getItem</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"token\\"</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token keyword\\">let</span> info <span class=\\"token operator\\">=</span> localStorage<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getItem</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"store\\"</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token keyword\\">const</span> message <span class=\\"token operator\\">=</span> <span class=\\"token constant\\">JSON</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">stringify</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span>token<span class=\\"token punctuation\\">,</span>info<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span> <span class=\\"token comment\\">// 要传递的数据</span>\\n  targetWindow<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">postMessage</span><span class=\\"token punctuation\\">(</span>message<span class=\\"token punctuation\\">,</span> url<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span><span class=\\"token number\\">100</span><span class=\\"token punctuation\\">)</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{n as data};
