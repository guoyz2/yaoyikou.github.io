<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.64" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://yaoyikou.xyz/%E5%85%B6%E4%BB%96/express-gateway%E7%BD%91%E5%85%B3"><meta property="og:site_name" content="æˆ‘ä¸æ˜¯é—²é±¼"><meta property="og:title" content="express-gateç½‘å…³"><meta property="og:description" content="express-gateç½‘å…³ å®‰è£…express gateway npm install -g express-gateway åˆ›å»ºä¸€ä¸ªexpress gateway eg gateway create æ ¹æ®æç¤ºè¯å¹¶é€‰æ‹©å…¥é—¨æœåŠ¡æ¨¡æ¿ âœ eg gateway create ? What is the name of your Express Gateway? my-gateway ? Where would you like to install your Express Gateway? my-gateway ? What type of Express Gateway do you want to create? (Use arrow keys) â¯ Getting Started with Express Gateway Basic (default pipeline with proxy)"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-09-20T16:09:28.000Z"><meta property="article:author" content="guoyz"><meta property="article:modified_time" content="2023-09-20T16:09:28.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"express-gateç½‘å…³","image":[""],"dateModified":"2023-09-20T16:09:28.000Z","author":[{"@type":"Person","name":"guoyz"}]}</script><title>express-gateç½‘å…³ | æˆ‘ä¸æ˜¯é—²é±¼</title><meta name="description" content="express-gateç½‘å…³ å®‰è£…express gateway npm install -g express-gateway åˆ›å»ºä¸€ä¸ªexpress gateway eg gateway create æ ¹æ®æç¤ºè¯å¹¶é€‰æ‹©å…¥é—¨æœåŠ¡æ¨¡æ¿ âœ eg gateway create ? What is the name of your Express Gateway? my-gateway ? Where would you like to install your Express Gateway? my-gateway ? What type of Express Gateway do you want to create? (Use arrow keys) â¯ Getting Started with Express Gateway Basic (default pipeline with proxy)">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-d94ad36a.css" as="style"><link rel="stylesheet" href="/assets/style-d94ad36a.css">
    <link rel="modulepreload" href="/assets/app-d0b2b34c.js"><link rel="modulepreload" href="/assets/express-gatewayç½‘å…³.html-0e728f1c.js"><link rel="modulepreload" href="/assets/express-gatewayç½‘å…³.html-a3516ee9.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="prefetch" href="/assets/frontmatteré…ç½®.html-05c618fe.js" as="script"><link rel="prefetch" href="/assets/index.html-a4570702.js" as="script"><link rel="prefetch" href="/assets/resume.html-af4244b8.js" as="script"><link rel="prefetch" href="/assets/apintoç½‘å…³.html-055f24d9.js" as="script"><link rel="prefetch" href="/assets/live2dæœåŠ¡.html-55720547.js" as="script"><link rel="prefetch" href="/assets/windowç§»åŠ¨æ–‡ä»¶å¤¹.html-18e7f1ef.js" as="script"><link rel="prefetch" href="/assets/apintoä½¿ç”¨.html-667d4a64.js" as="script"><link rel="prefetch" href="/assets/apiå¼€æ”¾å¹³å°æ¥å£å®šä¹‰.html-b4031687.js" as="script"><link rel="prefetch" href="/assets/gitå®‰è£…æ•™ç¨‹.html-9ea2b002.js" as="script"><link rel="prefetch" href="/assets/golangå®‰è£….html-01f4fbce.js" as="script"><link rel="prefetch" href="/assets/golangç‰ˆæœ¬ç®¡ç†å·¥å…·.html-0624f6a4.js" as="script"><link rel="prefetch" href="/assets/rediså®‰è£…æ•™ç¨‹.html-9bfaab59.js" as="script"><link rel="prefetch" href="/assets/åç«¯å­¦ä¹ è·¯çº¿.html-c3af3566.js" as="script"><link rel="prefetch" href="/assets/2023å¹´7æœˆ.html-f0210b65.js" as="script"><link rel="prefetch" href="/assets/nvmä½¿ç”¨.html-08d75abe.js" as="script"><link rel="prefetch" href="/assets/pm2ä½¿ç”¨.html-62d3bf60.js" as="script"><link rel="prefetch" href="/assets/postmessageä½¿ç”¨.html-3830d943.js" as="script"><link rel="prefetch" href="/assets/å‰ç«¯å­¦ä¹ è·¯çº¿.html-cbf559e7.js" as="script"><link rel="prefetch" href="/assets/æ”¯ä»˜å®å¾®ä¿¡æ”¶æ¬¾ç äºŒåˆä¸€å®ç°.html-90abf714.js" as="script"><link rel="prefetch" href="/assets/è·¨åŸŸä¼ å‚å®ç°.html-6ea1795f.js" as="script"><link rel="prefetch" href="/assets/æ˜é‡‘è‡ªåŠ¨ç­¾åˆ°.html-a0f11900.js" as="script"><link rel="prefetch" href="/assets/è¯»å–excelçˆ¬å–å¯¹åº”ç½‘ç«™ç”Ÿæˆå¯¼èˆªä¿¡æ¯.html-a97e0963.js" as="script"><link rel="prefetch" href="/assets/AI.html-e65f618f.js" as="script"><link rel="prefetch" href="/assets/golang.html-1946d8ec.js" as="script"><link rel="prefetch" href="/assets/å‰ç«¯.html-ad546fa8.js" as="script"><link rel="prefetch" href="/assets/vue-routerçš„historyè·¯ç”±éƒ¨ç½²nginxåˆ·æ–°404é—®é¢˜è§£å†³.html-5f0d1177.js" as="script"><link rel="prefetch" href="/assets/jsåŸºç¡€.html-87493f45.js" as="script"><link rel="prefetch" href="/assets/è·¨åŸŸå¤„ç†.html-17558550.js" as="script"><link rel="prefetch" href="/assets/404.html-5d1fb695.js" as="script"><link rel="prefetch" href="/assets/index.html-4b449237.js" as="script"><link rel="prefetch" href="/assets/index.html-8599d942.js" as="script"><link rel="prefetch" href="/assets/index.html-a40ea48e.js" as="script"><link rel="prefetch" href="/assets/index.html-0a709607.js" as="script"><link rel="prefetch" href="/assets/index.html-9866d26c.js" as="script"><link rel="prefetch" href="/assets/index.html-086e1c08.js" as="script"><link rel="prefetch" href="/assets/index.html-1b44b525.js" as="script"><link rel="prefetch" href="/assets/index.html-fbf6d07b.js" as="script"><link rel="prefetch" href="/assets/index.html-740c3cf3.js" as="script"><link rel="prefetch" href="/assets/index.html-3f9ac168.js" as="script"><link rel="prefetch" href="/assets/index.html-94de6cc5.js" as="script"><link rel="prefetch" href="/assets/index.html-7023dc02.js" as="script"><link rel="prefetch" href="/assets/index.html-b0ae1653.js" as="script"><link rel="prefetch" href="/assets/index.html-47f9a0fe.js" as="script"><link rel="prefetch" href="/assets/index.html-889f1bdd.js" as="script"><link rel="prefetch" href="/assets/index.html-0e0582c8.js" as="script"><link rel="prefetch" href="/assets/index.html-535b32cb.js" as="script"><link rel="prefetch" href="/assets/index.html-8ebd94ff.js" as="script"><link rel="prefetch" href="/assets/index.html-e54ef7ba.js" as="script"><link rel="prefetch" href="/assets/index.html-361246c6.js" as="script"><link rel="prefetch" href="/assets/index.html-7c5bd260.js" as="script"><link rel="prefetch" href="/assets/index.html-fa43faf7.js" as="script"><link rel="prefetch" href="/assets/index.html-59ab5f1b.js" as="script"><link rel="prefetch" href="/assets/index.html-be7005ee.js" as="script"><link rel="prefetch" href="/assets/index.html-0d6dc44e.js" as="script"><link rel="prefetch" href="/assets/index.html-02cb7150.js" as="script"><link rel="prefetch" href="/assets/index.html-4d02a722.js" as="script"><link rel="prefetch" href="/assets/index.html-2e09b724.js" as="script"><link rel="prefetch" href="/assets/index.html-c16ec7d3.js" as="script"><link rel="prefetch" href="/assets/index.html-7067e0c4.js" as="script"><link rel="prefetch" href="/assets/index.html-b0285552.js" as="script"><link rel="prefetch" href="/assets/index.html-bb69d7a2.js" as="script"><link rel="prefetch" href="/assets/frontmatteré…ç½®.html-60cac1f3.js" as="script"><link rel="prefetch" href="/assets/index.html-ce4e1e71.js" as="script"><link rel="prefetch" href="/assets/resume.html-c638bf0a.js" as="script"><link rel="prefetch" href="/assets/apintoç½‘å…³.html-1feb3702.js" as="script"><link rel="prefetch" href="/assets/live2dæœåŠ¡.html-b587025e.js" as="script"><link rel="prefetch" href="/assets/windowç§»åŠ¨æ–‡ä»¶å¤¹.html-b61215f6.js" as="script"><link rel="prefetch" href="/assets/apintoä½¿ç”¨.html-124088c9.js" as="script"><link rel="prefetch" href="/assets/apiå¼€æ”¾å¹³å°æ¥å£å®šä¹‰.html-f0634cd2.js" as="script"><link rel="prefetch" href="/assets/gitå®‰è£…æ•™ç¨‹.html-e62cc636.js" as="script"><link rel="prefetch" href="/assets/golangå®‰è£….html-ca25029c.js" as="script"><link rel="prefetch" href="/assets/golangç‰ˆæœ¬ç®¡ç†å·¥å…·.html-7b104015.js" as="script"><link rel="prefetch" href="/assets/rediså®‰è£…æ•™ç¨‹.html-c0769fb3.js" as="script"><link rel="prefetch" href="/assets/åç«¯å­¦ä¹ è·¯çº¿.html-1cad8db6.js" as="script"><link rel="prefetch" href="/assets/2023å¹´7æœˆ.html-78206ee1.js" as="script"><link rel="prefetch" href="/assets/nvmä½¿ç”¨.html-22e9c9c2.js" as="script"><link rel="prefetch" href="/assets/pm2ä½¿ç”¨.html-dd5f9bfa.js" as="script"><link rel="prefetch" href="/assets/postmessageä½¿ç”¨.html-851b75d8.js" as="script"><link rel="prefetch" href="/assets/å‰ç«¯å­¦ä¹ è·¯çº¿.html-2656e888.js" as="script"><link rel="prefetch" href="/assets/æ”¯ä»˜å®å¾®ä¿¡æ”¶æ¬¾ç äºŒåˆä¸€å®ç°.html-d68d8c84.js" as="script"><link rel="prefetch" href="/assets/è·¨åŸŸä¼ å‚å®ç°.html-b46604b8.js" as="script"><link rel="prefetch" href="/assets/æ˜é‡‘è‡ªåŠ¨ç­¾åˆ°.html-e8b09f31.js" as="script"><link rel="prefetch" href="/assets/è¯»å–excelçˆ¬å–å¯¹åº”ç½‘ç«™ç”Ÿæˆå¯¼èˆªä¿¡æ¯.html-99a2c756.js" as="script"><link rel="prefetch" href="/assets/AI.html-67ab2a23.js" as="script"><link rel="prefetch" href="/assets/golang.html-2a778f39.js" as="script"><link rel="prefetch" href="/assets/å‰ç«¯.html-ea547f47.js" as="script"><link rel="prefetch" href="/assets/vue-routerçš„historyè·¯ç”±éƒ¨ç½²nginxåˆ·æ–°404é—®é¢˜è§£å†³.html-52b68b1a.js" as="script"><link rel="prefetch" href="/assets/jsåŸºç¡€.html-b470235a.js" as="script"><link rel="prefetch" href="/assets/è·¨åŸŸå¤„ç†.html-207e3dc6.js" as="script"><link rel="prefetch" href="/assets/404.html-3e0eccfc.js" as="script"><link rel="prefetch" href="/assets/index.html-2fe2aaa5.js" as="script"><link rel="prefetch" href="/assets/index.html-7612cb90.js" as="script"><link rel="prefetch" href="/assets/index.html-eb22ba44.js" as="script"><link rel="prefetch" href="/assets/index.html-57b73f6b.js" as="script"><link rel="prefetch" href="/assets/index.html-0db94863.js" as="script"><link rel="prefetch" href="/assets/index.html-bd346a48.js" as="script"><link rel="prefetch" href="/assets/index.html-0922432b.js" as="script"><link rel="prefetch" href="/assets/index.html-4505bf1b.js" as="script"><link rel="prefetch" href="/assets/index.html-b1554d68.js" as="script"><link rel="prefetch" href="/assets/index.html-35f0a3fc.js" as="script"><link rel="prefetch" href="/assets/index.html-40ce77c3.js" as="script"><link rel="prefetch" href="/assets/index.html-3167b78b.js" as="script"><link rel="prefetch" href="/assets/index.html-85f5862b.js" as="script"><link rel="prefetch" href="/assets/index.html-90b2053d.js" as="script"><link rel="prefetch" href="/assets/index.html-fd4a1f8b.js" as="script"><link rel="prefetch" href="/assets/index.html-9ec00f1c.js" as="script"><link rel="prefetch" href="/assets/index.html-a00c9b0c.js" as="script"><link rel="prefetch" href="/assets/index.html-685cc9b0.js" as="script"><link rel="prefetch" href="/assets/index.html-fca53e23.js" as="script"><link rel="prefetch" href="/assets/index.html-97aad328.js" as="script"><link rel="prefetch" href="/assets/index.html-8957aeba.js" as="script"><link rel="prefetch" href="/assets/index.html-be4b80d1.js" as="script"><link rel="prefetch" href="/assets/index.html-9f29d30b.js" as="script"><link rel="prefetch" href="/assets/index.html-66a53ae8.js" as="script"><link rel="prefetch" href="/assets/index.html-924a869a.js" as="script"><link rel="prefetch" href="/assets/index.html-346bf744.js" as="script"><link rel="prefetch" href="/assets/index.html-a555a13e.js" as="script"><link rel="prefetch" href="/assets/index.html-f40e95cc.js" as="script"><link rel="prefetch" href="/assets/index.html-45005494.js" as="script"><link rel="prefetch" href="/assets/index.html-0161a168.js" as="script"><link rel="prefetch" href="/assets/index.html-2a0beec1.js" as="script"><link rel="prefetch" href="/assets/index.html-f959d486.js" as="script"><link rel="prefetch" href="/assets/auto-fa8841cf.js" as="script"><link rel="prefetch" href="/assets/index-ae8c1e74.js" as="script"><link rel="prefetch" href="/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-1708dedd.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-994ed47a.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-5794cde2.js" as="script"><link rel="prefetch" href="/assets/SearchBox-fb9ef7b8.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container no-sidebar has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="https://p3-passport.byteimg.com/img/user-avatar/3ac3bd7a07f71c8fb26e94add422561b~180x180.awebp" alt="æˆ‘ä¸æ˜¯é—²é±¼"><!----><span class="vp-site-name hide-in-pad">æˆ‘ä¸æ˜¯é—²é±¼</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>é¦–é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="å‰ç«¯"><span class="title"><!---->å‰ç«¯</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/%E5%89%8D%E7%AB%AF/js/%E8%B7%A8%E5%9F%9F%E5%A4%84%E7%90%86.html"><!---->js<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/%E5%89%8D%E7%AB%AF/vue/vue-router%E7%9A%84history%E8%B7%AF%E7%94%B1%E9%83%A8%E7%BD%B2nginx%E5%88%B7%E6%96%B0404%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.html"><!---->vue<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/%E5%89%8D%E7%AB%AF/%E9%9D%A2%E8%AF%95%E9%A2%98/js%E5%9F%BA%E7%A1%80.html"><!---->é¢è¯•é¢˜<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/%E5%90%8E%E7%AB%AF/golang%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7.html"><!---->åç«¯<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/%E7%88%AC%E8%99%AB/%E6%8E%98%E9%87%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0.html"><!---->çˆ¬è™«<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="å¸¸ç”¨å¯¼èˆª"><span class="title"><!---->å¸¸ç”¨å¯¼èˆª</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/%E5%AF%BC%E8%88%AA/%E5%89%8D%E7%AB%AF.html"><!---->å‰ç«¯<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/%E5%AF%BC%E8%88%AA/golang.html"><!---->golang<!----></a></li></ul></button></div></div></nav><!----><!----><!----><div class="search-box" role="search" data-v-e574e488><input value="" aria-label="Search" class="" placeholder="æœç´¢" autocomplete="off" spellcheck="false" data-v-e574e488><!----></div><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->express-gateç½‘å…³</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">guoyz</span></span><span property="author" content="guoyz"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-09-20T16:09:28.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 14 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT14M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#_5åˆ†é’Ÿå…¥é—¨å¯¼èˆª">5åˆ†é’Ÿå…¥é—¨å¯¼èˆª</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#åˆ¶å®šå¾®æœåŠ¡å¹¶ä½œä¸ºapiå…¬å¼€">åˆ¶å®šå¾®æœåŠ¡å¹¶ä½œä¸ºapiå…¬å¼€</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#å®šä¹‰apiçš„æ¶ˆè´¹è€…">å®šä¹‰apiçš„æ¶ˆè´¹è€…</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#ä½¿ç”¨ç§˜é’¥æˆæƒä¿æŠ¤api">ä½¿ç”¨ç§˜é’¥æˆæƒä¿æŠ¤api</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#æ ¸å¿ƒæ¦‚å¿µ">æ ¸å¿ƒæ¦‚å¿µ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#endpoints">endpoints</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#policies-reference-ç­–ç•¥å‚è€ƒ">Policies Referenceï¼ˆç­–ç•¥å‚è€ƒï¼‰</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#basic-authorization">Basic Authorization</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#customization-è‡ªå®šä¹‰ç­–ç•¥">Customizationï¼ˆè‡ªå®šä¹‰ç­–ç•¥ï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#cli-reference-å‘½ä»¤è¡Œå‚è€ƒ">CLI Reference (å‘½ä»¤è¡Œå‚è€ƒ)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#plugins-æ’ä»¶">plugins (æ’ä»¶)</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#plugin-development-æ’ä»¶å¼€å‘">Plugin Developmentï¼ˆæ’ä»¶å¼€å‘ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#policy-development-ç­–ç•¥å¼€å‘">Policy Developmentï¼ˆç­–ç•¥å¼€å‘ï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#geteway-config-ymlæ–‡ä»¶è§£æ">geteway.config.ymlæ–‡ä»¶è§£æ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#http">http</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#https">https</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#admin">admin</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#apiendpoints">apiEndpoints</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#serviceendpoints">serviceEndpoints</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#policies">policies</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#pipelines">pipelines</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="express-gateç½‘å…³" tabindex="-1"><a class="header-anchor" href="#express-gateç½‘å…³" aria-hidden="true">#</a> express-gateç½‘å…³</h1><p>å®‰è£…express gateway</p><p>npm install -g express-gateway</p><p>åˆ›å»ºä¸€ä¸ªexpress gateway</p><p>eg gateway create</p><p>æ ¹æ®æç¤ºè¯å¹¶é€‰æ‹©å…¥é—¨æœåŠ¡æ¨¡æ¿</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> âœ eg gateway create
 ? What is the name of your Express Gateway? my-gateway
 ? Where would you like to install your Express Gateway? my-gateway
 ? What type of Express Gateway do you want to create? (Use arrow keys)
 â¯ Getting Started with Express Gateway
   Basic (default pipeline with proxy)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œexpress gateway</p><p>cd my-gateway &amp;&amp; npm start</p><h2 id="_5åˆ†é’Ÿå…¥é—¨å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#_5åˆ†é’Ÿå…¥é—¨å¯¼èˆª" aria-hidden="true">#</a> 5åˆ†é’Ÿå…¥é—¨å¯¼èˆª</h2><p>å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿å·²å®‰è£…express gatewayå¹¶ä½¿ç”¨å…¥é—¨æœåŠ¡å™¨æ¨¡æ¿å°†å…¶å¯åŠ¨</p><p>æœ¬å¯¼èˆªä¸­ï¼Œä½ å¯ä»¥ï¼š</p><ol><li>åˆ¶å®šå¾®æœåŠ¡å¹¶ä½œä¸ºapiå…¬å¼€</li><li>å®šä¹‰apiçš„æ¶ˆè´¹è€…</li><li>ä½¿ç”¨ç§˜é’¥æˆæƒä¿æŠ¤apiå®‰å…¨</li></ol><p>æ³¨ï¼šè¿™ä¸ªç½‘å…³é™„å¸¦ä¸€ä¸ªå†…å­˜æ•°æ®åº“ï¼Œä½œä¸ºæŒ‡å—çš„ä¸€éƒ¨åˆ†æ‰€åšçš„æ‰€æœ‰é…ç½®æ–‡ä»¶æ›´æ”¹éƒ½ä¸éœ€è¦å¯åŠ¨expressç½‘å…³ï¼Œçƒ­é‡æ–°åŠ è½½åŠŸèƒ½å°†è‡ªåŠ¨å¤„ç†æ­¤é—®é¢˜ï¼Œæ— éœ€é‡æ–°å¯åŠ¨</p><h2 id="åˆ¶å®šå¾®æœåŠ¡å¹¶ä½œä¸ºapiå…¬å¼€" tabindex="-1"><a class="header-anchor" href="#åˆ¶å®šå¾®æœåŠ¡å¹¶ä½œä¸ºapiå…¬å¼€" aria-hidden="true">#</a> åˆ¶å®šå¾®æœåŠ¡å¹¶ä½œä¸ºapiå…¬å¼€</h2><ol><li>æˆ‘ä»¬æŒ‡å®šç°æœ‰æœåŠ¡ <a href="https://httpbin.org/ip" target="_blank" rel="noopener noreferrer">https://httpbin.org/ip<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä»£ç†å’Œç®¡ç†ï¼Œå°±å¥½åƒå®ƒæ˜¯æˆ‘ä»¬è‡ªå·±ä»é˜²ç«å¢™å†…å‘èµ·çš„ä¸€æ ·ã€‚è¯¥æœåŠ¡å…è®¸ç”¨æˆ·è·å–getå¹¶è¿”å›JSONå­—ç¬¦ä¸²ä½œä¸ºè¾“å‡ºã€‚å®ƒæ˜¯å…è´¹æä¾›çš„ï¼Œæˆ‘ä»¬å°†å±•ç¤ºExpress Gatewayçš„åŠŸèƒ½</li><li>è¿™ä¸ªæœåŠ¡è¢«æŒ‡å®šä¸ºexpress gatewayä¸­é»˜è®¤æµæ°´çº¿çš„æœåŠ¡ç»ˆç‚¹ï¼Œæµæ°´çº¿æ˜¯ä¸€ç»„ç­–ç•¥ï¼Œexpress gatewayå…·æœ‰ä»£ç†ç­–ç•¥ï¼Œä½¿ç”¨é»˜è®¤æµæ°´çº¿çš„ä»£ç†ç­–ç•¥ï¼Œç½‘å…³ç°åœ¨å°†ä½äº<a href="https://httpbin.org/ip%E6%9C%8D%E5%8A%A1%EF%BC%8C%E5%B9%B6%E5%B0%86%E5%A4%96%E9%83%A8%E8%AF%B7%E6%B1%82%E4%BD%9C%E4%B8%BA%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%82%B9%E8%B7%AF%E7%94%B1%E5%88%B0%E5%AE%83" target="_blank" rel="noopener noreferrer">https://httpbin.org/ipæœåŠ¡ï¼Œå¹¶å°†å¤–éƒ¨è¯·æ±‚ä½œä¸ºæœåŠ¡ç«¯ç‚¹è·¯ç”±åˆ°å®ƒ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ol><li>cd config</li><li>æ‰“å¼€ gateway.comfig.yml å¹¶æ‰¾åˆ°å®šä¹‰äº†httpbinçš„æœåŠ¡ç«¯ç‚¹çš„ serviceEndpoint éƒ¨åˆ†</li><li>æ¥ä¸‹æ¥åœ¨é»˜è®¤æµæ°´çº¿çš„ä»£ç†ç­–ç•¥ä¸­æŸ¥æ‰¾httpbin serviceEndpoint</li></ol></li><li>æˆ‘ä»¬å°†é€šè¿‡express gateway å°†httpbinæœåŠ¡å…¬å¼€ä¸ºapiç«¯ç‚¹ï¼Œå½“apié€šè¿‡apiç«¯ç‚¹å…¬å¼€æ—¶ï¼Œå¯ä»¥ä»å¤–éƒ¨è®¿é—®API <ol><li>æ‰“å¼€ gateway.comfig.yml</li><li>æ‰¾åˆ°å®šä¹‰äº†åä¸ºâ€œapiâ€çš„APIç«¯ç‚¹çš„apiEndpointséƒ¨åˆ†</li></ol></li></ol><p>â€‹ æ³¨ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œä»£ç†ç­–ç•¥ä¼šå°†APIè¯·æ±‚çš„è·¯å¾„é™„åŠ åˆ°æœåŠ¡ç«¯ç‚¹</p><ol start="4"><li>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªç«¯ç‚¹ï¼Œä»–èƒ½é€šè¿‡express gatewayè®¿é—®api</li></ol><h2 id="å®šä¹‰apiçš„æ¶ˆè´¹è€…" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰apiçš„æ¶ˆè´¹è€…" aria-hidden="true">#</a> å®šä¹‰apiçš„æ¶ˆè´¹è€…</h2><ol><li><p>ä¸ºäº†ç®¡ç†æˆ‘ä»¬çš„APIï¼Œæˆ‘ä»¬å°†å®šä¹‰è¢«ç§°ä¸ºâ€œæ¶ˆè´¹è€…â€çš„æˆæƒç”¨æˆ·ï¼Œå…è®¸ä»–ä»¬ä½¿ç”¨APIã€‚</p></li><li><p>ä½¿ç”¨eg users create åˆ›å»ºç”¨æˆ·</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>eg users create
Configuring yargs through package.json is deprecated and will be removed in a future major release, please use the JS API instead.
Configuring yargs through package.json is deprecated and will be removed in a future major release, please use the JS API instead.
Configuring yargs through package.json is deprecated and will be removed in a future major release, please use the JS API instead.
? Enter firstname [required]: guo
? Enter lastname [required]: yz
? Enter username [required]: guoyz
? Enter email: 78300406@qq.com
? Enter redirectUri: undefined
âˆš Created 22de903f-3087-4df2-84b2-e8c0def22d81
{
  &quot;isActive&quot;: true,
  &quot;username&quot;: &quot;guoyz&quot;,
  &quot;id&quot;: &quot;22de903f-3087-4df2-84b2-e8c0def22d81&quot;,
  &quot;firstname&quot;: &quot;guo&quot;,
  &quot;lastname&quot;: &quot;yz&quot;,
  &quot;email&quot;: &quot;78300406@qq.com&quot;,
  &quot;createdAt&quot;: &quot;Sat Aug 26 2023 23:17:58 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)&quot;,
  &quot;updatedAt&quot;: &quot;Sat Aug 26 2023 23:17:58 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="ä½¿ç”¨ç§˜é’¥æˆæƒä¿æŠ¤api" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨ç§˜é’¥æˆæƒä¿æŠ¤api" aria-hidden="true">#</a> ä½¿ç”¨ç§˜é’¥æˆæƒä¿æŠ¤api</h2><ol><li>ç›®å‰apiå·²å®Œå…¨å…¬å¼€ï¼Œå¹¶å¯ä»¥é€šè¿‡å…¶apiç«¯ç‚¹è¿›è¡Œè®¿é—®ï¼Œæˆ‘ä»¬ç°åœ¨è¦ç”¨ç§˜é’¥æˆæƒæ¥ä¿æŠ¤å®ƒï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ç§˜é’¥æˆæƒç­–ç•¥æ·»åŠ åˆ°äº†é»˜è®¤æµæ°´çº¿ä¸­</li><li>ç»™guoyzåˆ†é…ä¸€ä¸ªå¯†é’¥ <ol><li>eg credentials create -c guoyz -t key-auth -q</li></ol></li></ol><h2 id="æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒæ¦‚å¿µ" aria-hidden="true">#</a> æ ¸å¿ƒæ¦‚å¿µ</h2><p>æœ‰å…³Express GatewayåŠå…¶å·¥ä½œæ–¹å¼çš„æ¦‚è¿°ï¼Œè¯·æŸ¥çœ‹â€œå…³äºâ€é¡µé¢ï¼Œç†Ÿæ‚‰Express Gatewayä¸­çš„æ ¸å¿ƒå®ä½“åŠå…¶ä½¿ç”¨æ–¹å¼ã€‚</p><p>Express Gatewayå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒå®ä½“</p><h3 id="endpoints" tabindex="-1"><a class="header-anchor" href="#endpoints" aria-hidden="true">#</a> endpoints</h3><p>ç«¯ç‚¹æ˜¯URLã€‚Express Gatewayæœ‰ä¸¤ç§ä¸åŒç±»å‹çš„ç«¯ç‚¹ï¼š</p><ul><li><p>API endpoints</p></li><li><p>Service endpoints</p></li></ul><p>Express Gatewayé€šè¿‡API endpointså…¬å¼€APIã€‚ä½œä¸ºç½‘å…³ï¼Œå®ƒå°†æ¥è‡ªAPIç«¯ç‚¹çš„APIè¯·æ±‚ä»£ç†åˆ°æœåŠ¡ç«¯ç‚¹ä¸­å¼•ç”¨çš„å¾®æœåŠ¡ã€‚</p><h2 id="policies-reference-ç­–ç•¥å‚è€ƒ" tabindex="-1"><a class="header-anchor" href="#policies-reference-ç­–ç•¥å‚è€ƒ" aria-hidden="true">#</a> Policies Referenceï¼ˆç­–ç•¥å‚è€ƒï¼‰</h2><p>ç­–ç•¥æ˜¯Express Gatewayä¸­åŠŸèƒ½çš„æ„å»ºå—ã€‚ç­–ç•¥å¯ä»¥è¢«è§†ä¸ºExpressä¸­é—´ä»¶çš„åŒ…è£…å™¨ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼æ·»åŠ åŠ¨æ€è¯„ä¼°å’Œæ‰§è¡Œè¡Œä¸ºï¼š</p><ul><li><p>æ¡ä»¶</p></li><li><p>è¡ŒåŠ¨</p></li><li><p>å‚æ•°</p></li></ul><p>ä¸€ä¸ªç­–ç•¥å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶å’Œæ“ä½œå¯¹ã€‚ä¸€ä¸ªæ¡ä»¶å’Œä¸€ä¸ªåŠ¨ä½œéƒ½å¯ä»¥æœ‰è‡ªå·±çš„ä¸€ç»„å”¯ä¸€å‚æ•°ï¼Œä½¿è¿™å¯¹å‚æ•°æ˜¯å”¯ä¸€çš„ã€‚</p><p>å¯ä»¥ä½¿ç”¨Express Gatewayå…¬å¼€çš„JavaScriptå¯¹è±¡å’Œå‡½æ•°å¯¹ç­–ç•¥è¿›è¡Œé«˜åº¦å®šåˆ¶ã€‚JavaScriptå¯¹è±¡å’Œå‡½æ•°å¯ä»¥åœ¨æ¡ä»¶ã€æ“ä½œå’Œå‚æ•°ä¸­æŒ‡å®šï¼Œä»¥åŠ¨æ€æ‰§è¡Œé€»è¾‘ã€‚</p><p>æœ‰å…³å¦‚ä½•åœ¨æ¡ä»¶ã€æ“ä½œå’Œç­–ç•¥ï¼ˆå¦‚è¡¨è¾¾å¼ç­–ç•¥ï¼‰ä¸­æŒ‡å®šé€»è¾‘çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…ç­–ç•¥è‡ªå®šä¹‰å‚è€ƒã€‚</p><h3 id="basic-authorization" tabindex="-1"><a class="header-anchor" href="#basic-authorization" aria-hidden="true">#</a> Basic Authorization</h3><p>åŸºæœ¬æˆæƒç­–ç•¥éµå¾ªRFC-7617æ ‡å‡†ã€‚æ ¹æ®æ ‡å‡†ï¼Œå¦‚æœç”¨æˆ·ä»£ç†æƒ³è¦å‘é€ç”¨æˆ·idå’Œå¯†ç ï¼Œå®ƒå°†ä½¿ç”¨ä»¥ä¸‹HTTPå¤´ã€‚</p><p>ç¤ºä¾‹: Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==</p><h4 id="ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#ç”¨æ³•" aria-hidden="true">#</a> ç”¨æ³•</h4><ol><li><p>ä¸ºäº†ä½¿ç”¨åŸºæœ¬æˆæƒç­–ç•¥ï¼Œå¿…é¡»åˆ›å»ºä½¿ç”¨è€…å¹¶ä¸ºå…¶åˆ›å»ºåŸºæœ¬èº«ä»½éªŒè¯å‡­æ®ã€‚</p></li><li><p>è¦åˆ›å»ºä½¿ç”¨è€…ï¼ˆç”¨æˆ·å’Œåº”ç”¨ç¨‹åºï¼‰ï¼šè¯·ä½¿ç”¨CLIå¹¶åˆ›å»ºç”¨æˆ·æˆ–åˆ›å»ºåº”ç”¨ç¨‹åºå‘½ä»¤ã€‚</p></li><li><p>è¦ä¸ºåº”ç”¨ç¨‹åºæˆ–ç”¨æˆ·åˆ›å»ºåŸºæœ¬èº«ä»½éªŒè¯å‡­æ®ï¼šè¯·ä½¿ç”¨CLIå¹¶é”®å…¥basic authçš„create credentialå‘½ä»¤ã€‚</p></li><li><p>è¦å¯ç”¨åŸºæœ¬æˆæƒç­–ç•¥ï¼Œè¯·åœ¨policyséƒ¨åˆ†çš„gateway.config.ymlä¸­æ·»åŠ åŸºæœ¬æˆæƒã€‚</p></li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">policies</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> basic<span class="token punctuation">-</span>auth
  <span class="token comment"># å…¶ä»–ç­–ç•¥</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="customization-è‡ªå®šä¹‰ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#customization-è‡ªå®šä¹‰ç­–ç•¥" aria-hidden="true">#</a> Customizationï¼ˆè‡ªå®šä¹‰ç­–ç•¥ï¼‰</h3><p>Express Gatewayçš„åŠ¨æ€åŠŸèƒ½æºäºä¸€ç»„ä¸°å¯Œçš„è‡ªå®šä¹‰åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å°†Express.jsä¸­é—´ä»¶ä¸å¯ä»¥ä½¿ç”¨çº¯JavaScriptæŒ‡å®šçš„è¡¨è¾¾å¼å’Œé€»è¾‘ç›¸ç»“åˆã€‚</p><h4 id="conditions-æ¡ä»¶" tabindex="-1"><a class="header-anchor" href="#conditions-æ¡ä»¶" aria-hidden="true">#</a> Conditionsï¼ˆæ¡ä»¶ï¼‰</h4><p>æ¡ä»¶æ§åˆ¶Express Gatewayæ“ä½œçš„æ‰§è¡Œæµç¨‹ã€‚Express Gatewayæä¾›äº†ä¸€ç»„ä¸°å¯Œçš„æ ¸å¿ƒæ¡ä»¶ï¼Œå¯ç”¨äºExpress Gatewayä¸­çš„ä»»ä½•ç­–ç•¥ã€‚æ•´ä¸ªExpress Gatewayå…±äº«çš„åº”ç”¨ç¨‹åºæ•°æ®å­˜å‚¨åœ¨JavaScriptå¯¹è±¡ä¸­ï¼Œå¯ä»¥ä½¿ç”¨JavaScriptè¡¨è¾¾å¼å’Œå‡½æ•°è¿›è¡Œè¯„ä¼°ã€‚</p><h4 id="express-gateway-context-object-egcontext-ç½‘å…³ä¸Šä¸‹æ–‡å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#express-gateway-context-object-egcontext-ç½‘å…³ä¸Šä¸‹æ–‡å¯¹è±¡" aria-hidden="true">#</a> Express Gateway Context Object (egContext)ï¼ˆç½‘å…³ä¸Šä¸‹æ–‡å¯¹è±¡ï¼‰</h4><p>çŠ¶æ€å’Œå…¶ä»–åº”ç”¨ç¨‹åºæ•°æ®å’Œå…ƒæ•°æ®å­˜å‚¨åœ¨Express Gatewayä¸Šä¸‹æ–‡å¯¹è±¡æˆ–egContextå¯¹è±¡ä¸­ã€‚ä¸Šä¸‹æ–‡å¯¹è±¡åŠå…¶ç›¸å…³å±æ€§ä¼šæ ¹æ®æ‰§è¡ŒèŒƒå›´è€Œæ›´æ”¹ã€‚</p><p>ç¤ºä¾‹</p><p>åœ¨æµæ°´çº¿1ä¸­ï¼Œè°ƒç”¨APIç«¯ç‚¹çš„ç”¨æˆ·å°†åœ¨egContext.user.idä¸­è®¾ç½®å…¶ç”¨æˆ·idæ•°æ®ï¼Œè¯¥æ•°æ®ä¸è°ƒç”¨åŒä¸€APIç«¯ç‚¹çš„å¦ä¸€ç”¨æˆ·ä¸åŒã€‚å°½ç®¡å®ƒæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä½†è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ä¼šåˆ›å»ºåŒä¸€å¯¹è±¡å’Œæ•°æ®çš„ä¸åŒå®ä¾‹ã€‚</p><h4 id="egcontext" tabindex="-1"><a class="header-anchor" href="#egcontext" aria-hidden="true">#</a> egContext</h4><p>å°†ç”¨äºæ‰§è¡Œæ¡ä»¶ã€æ“ä½œå’Œè¡¨è¾¾å¼ç­–ç•¥ä¸­çš„JavaScriptä»£ç çš„JavaScriptæ²™ç›’å¯¹è±¡ã€‚å®ƒå¯ä»¥ç”¨äºå®ç°éæ ‡å‡†åœºæ™¯ã€‚</p><p>ç”±äºå®‰å…¨åŸå› ï¼Œæ‰€æœ‰Node.JSå…¨å±€å˜é‡ï¼ˆå¦‚processã€requireç­‰ï¼‰éƒ½å°†ä¸å¯ç”¨ã€‚</p><p>egContextåŒ…å«ä»¥ä¸‹å¯ä½¿ç”¨çš„å±æ€§ï¼š</p><ul><li>req:ExpressJSè¯·æ±‚å¯¹è±¡</li><li>res:ExpressJSå“åº”å¯¹è±¡</li><li>apiEndpointï¼šæ­£åœ¨æ‰§è¡Œçš„é…ç½®æˆ–APIç«¯ç‚¹ã€‚ä¾‹å¦‚ï¼ŒapiEndpoint.scopeså°†ä¸ºç«¯ç‚¹æä¾›æ‰€æœ‰é…ç½®çš„ä½œç”¨åŸŸ</li><li>consumerï¼šå…³äºå½“å‰æ¶ˆè´¹è€…çš„ä¿¡æ¯ï¼ˆå¯ä»¥æ˜¯åº”ç”¨ç¨‹åºæˆ–ç”¨æˆ·ï¼‰</li><li>requestID:uuidv4ï¼ˆbase62ç¼–ç ï¼‰å½“å‰è¯·æ±‚çš„æ ‡è¯†ç¬¦ï¼Œç”¨äºè·Ÿè¸ªç›®çš„ã€‚å¦‚æœéœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨headersç­–ç•¥å°†æ­¤å€¼ä½œä¸ºheaderå‘ä¸‹ä¼ æ’­ã€‚</li><li>requestStreamï¼šå¦‚æœè®¾ç½®äº†ï¼Œåˆ™æ­¤æµå°†é€šè¿‡æµæ°´çº¿ä¼ è¾“åˆ°ä»£ç†çš„è¯·æ±‚ä¸»ä½“ä¸­ï¼Œè€Œä¸æ˜¯åŸå§‹è¯·æ±‚ä¸»ä½“ä¸­ã€‚è¿™å¯ä»¥å®ç°æœ‰è¶£çš„åœºæ™¯ã€‚</li></ul><h2 id="cli-reference-å‘½ä»¤è¡Œå‚è€ƒ" tabindex="-1"><a class="header-anchor" href="#cli-reference-å‘½ä»¤è¡Œå‚è€ƒ" aria-hidden="true">#</a> CLI Reference (å‘½ä»¤è¡Œå‚è€ƒ)</h2><h2 id="plugins-æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#plugins-æ’ä»¶" aria-hidden="true">#</a> plugins (æ’ä»¶)</h2><p>Express Gateway v1.2.0+é™„å¸¦äº†ä¸€ä¸ªæ’ä»¶æ¡†æ¶ï¼Œç”¨äºæ‰©å±•Express Gatewayæ ¸å¿ƒã€‚æ’ä»¶æ¡†æ¶å…è®¸ä»»ä½•äººä½¿ç”¨Expressä¸­é—´ä»¶å¹¶å°†å®ƒä»¬ä½œä¸ºæ’ä»¶é›†æˆåˆ°Expressç½‘å…³ä¸­ã€‚Express Gatewayæä¾›äº†ä¸€ç§å£°æ˜æ€§çš„æ–¹å¼æ¥åˆ©ç”¨Expressä¸­é—´ä»¶è¿›è¡Œé›†ä¸­é©±åŠ¨å’ŒåŠ¨æ€æ‰§è¡Œã€‚</p><p>æ³¨æ„ï¼šä½¿ç”¨æ­¤æ¡†æ¶ï¼ŒExpress Gatewayæ ¸å¿ƒä¸­çš„ç°æœ‰ç­–ç•¥æœ€ç»ˆå°†ä»æ ¸å¿ƒé‡æ„ä¸ºExpress Gatewayæ’ä»¶ã€‚</p><h4 id="æ’ä»¶ç»“æ„" tabindex="-1"><a class="header-anchor" href="#æ’ä»¶ç»“æ„" aria-hidden="true">#</a> æ’ä»¶ç»“æ„</h4><p>Expressç½‘å…³æ’ä»¶åŒ…å«å®ä½“å¹¶å…è®¸äº‹ä»¶è®¢é˜…ã€‚æ‚¨å¯ä»¥å°†æ’ä»¶çœ‹ä½œExpressç½‘å…³å®ä½“çš„å®¹å™¨ï¼Œè¿™äº›å®ä½“é€šè¿‡æ·»åŠ å®ä½“å’Œæä¾›äº‹ä»¶å¤„ç†ç¨‹åºæ¥æ‰©å±•æ ¸å¿ƒã€‚</p><p>åœ¨æ’ä»¶æ¡†æ¶çš„ç¬¬ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œæ”¯æŒä»¥ä¸‹å®ä½“ï¼š</p><ul><li>Policies-ç­–ç•¥</li><li>Conditions-æ¡ä»¶</li><li>ä¸ºadmin å’Œ gatewayæœåŠ¡è‡ªå®šä¹‰è·¯ç”±å’Œä¸­é—´ä»¶</li></ul><p>å¯¹äºæ‰€æœ‰è€ƒè™‘ä¸­çš„æ‰©å±•ç‚¹ï¼Œè¯·å‚è€ƒExpress Gatewayæ’ä»¶è§„èŒƒã€‚</p><p>æ’ä»¶æ¡†æ¶å…¬å¼€äº†ä¸€ä¸ªäº‹ä»¶æ€»çº¿ï¼Œå¯ä»¥å¯¹Expressç½‘å…³ç”Ÿå‘½å‘¨æœŸä¸­çš„äº‹ä»¶åšå‡ºååº”ã€‚</p><h4 id="è‡ªåŠ¨æ’ä»¶å®‰è£…" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨æ’ä»¶å®‰è£…" aria-hidden="true">#</a> è‡ªåŠ¨æ’ä»¶å®‰è£…</h4><h4 id="æ’ä»¶ä¸åœ¨npmä¸Š-è‡ªå®šä¹‰æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#æ’ä»¶ä¸åœ¨npmä¸Š-è‡ªå®šä¹‰æ’ä»¶" aria-hidden="true">#</a> æ’ä»¶ä¸åœ¨NPMä¸Šï¼ˆè‡ªå®šä¹‰æ’ä»¶ï¼‰</h4><p>åœ¨æ’ä»¶ä¸åœ¨NPMä¸Šçš„ç½•è§æƒ…å†µä¸‹ï¼ˆå¦‚æœæ‚¨æœ‰ä¸“ç”¨ä»£ç å­˜å‚¨åº“ï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç‰¹å®šæ’ä»¶éƒ¨åˆ†çš„packageå±æ€§æŒ‡å®šç¡®åˆ‡çš„å…¥å£ç‚¹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">plugins</span><span class="token punctuation">:</span>
   <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token comment"># &quot;express-gateway-plugin-example&quot;</span>
      <span class="token key atrule">param1</span><span class="token punctuation">:</span> <span class="token string">&#39;global per plugin param1&#39;</span>
      <span class="token key atrule">package</span><span class="token punctuation">:</span> <span class="token string">&#39;../manifest.js&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="plugin-development-æ’ä»¶å¼€å‘" tabindex="-1"><a class="header-anchor" href="#plugin-development-æ’ä»¶å¼€å‘" aria-hidden="true">#</a> Plugin Developmentï¼ˆæ’ä»¶å¼€å‘ï¼‰</h3><h4 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a></h4><h3 id="policy-development-ç­–ç•¥å¼€å‘" tabindex="-1"><a class="header-anchor" href="#policy-development-ç­–ç•¥å¼€å‘" aria-hidden="true">#</a> Policy Developmentï¼ˆç­–ç•¥å¼€å‘ï¼‰</h3><h4 id="å®šä¹‰ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰ç­–ç•¥" aria-hidden="true">#</a> å®šä¹‰ç­–ç•¥</h4><p>è¯¥ç­–ç•¥æ˜¯ExpressJSä¸­é—´ä»¶çš„åŒ…è£…å™¨</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token operator">/</span>policies<span class="token operator">/</span>example<span class="token operator">-</span>policy<span class="token punctuation">.</span>jsæ–‡ä»¶é‡Œçš„å†…å®¹
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;example&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">schema</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">$id</span><span class="token operator">:</span> <span class="token string">&quot;http://express-gateway.io/schemas/policies/example-policy.json&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">baseUrl</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;https://example.com&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">policy</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">actionParams</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
        <span class="token string">&quot;executing policy-from-example-plugin with params&quot;</span><span class="token punctuation">,</span>
        actionParams
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è°ƒç”¨ä¸‹ä¸€ä¸ªç­–ç•¥</span>
      <span class="token comment">// æˆ–è€…å†™å…¥å“åº”:  res.json({result: &quot;this is the response&quot;})</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>name-ç­–ç•¥çš„åç§°ï¼Œè¿™æ˜¯åœ¨æµæ°´çº¿ä¸­å¼•ç”¨ç­–ç•¥çš„æ–¹å¼</p><p>schema-åœ¨æ‰§è¡Œç­–ç•¥æ—¶å°†ç”¨äºéªŒè¯çš„JSON schemaã€‚</p><p>policy-è¿”å›ExpressJSä¸­é—´ä»¶çš„å‡½æ•°ã€‚å‡½æ•°æ¥å—actionParamsã€‚actionParamsæ˜¯è¯¥ç­–ç•¥ç®¡é“ä¸­çš„æ‰€æœ‰é…ç½®é€‰é¡¹</p><h4 id="action-å‚æ•°" tabindex="-1"><a class="header-anchor" href="#action-å‚æ•°" aria-hidden="true">#</a> Action å‚æ•°</h4><p>å‡è®¾æ‚¨å°†æµæ°´çº¿å®šä¹‰ä¸ºï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">pipelines</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiPipeline</span><span class="token punctuation">:</span>
    <span class="token key atrule">apiEndpoints</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> api
    <span class="token key atrule">policies</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">example</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">action</span><span class="token punctuation">:</span>  <span class="token comment"># action ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å°†æ˜¯ actionParams</span>
              <span class="token key atrule">baseUrl</span><span class="token punctuation">:</span> <span class="token string">&#39;https://example.com&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“æ„å»ºæµæ°´çº¿æ—¶ï¼Œæ‚¨çš„ç­–ç•¥å°†å…·æœ‰actionParamsæ˜¯</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span><span class="token string">&quot;https://example.com&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä½¿ç”¨æ’ä»¶å¯¼å‡ºç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ’ä»¶å¯¼å‡ºç­–ç•¥" aria-hidden="true">#</a> ä½¿ç”¨æ’ä»¶å¯¼å‡ºç­–ç•¥</h4><p>ç°åœ¨æ˜¯æ—¶å€™åœ¨æ’ä»¶åˆå§‹åŒ–æœŸé—´æ³¨å†Œç­–ç•¥äº†ï¼šè¿™æ˜¯åœ¨manifest.js initå‡½æ•°ä¸­å®Œæˆçš„</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">&#39;1.2.0&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">pluginContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> policy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./policies/example-policy&#39;</span><span class="token punctuation">)</span>
     pluginContext<span class="token punctuation">.</span><span class="token function">registerPolicy</span><span class="token punctuation">(</span>policy<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç­–ç•¥æ³¨å†Œå’Œæ‰§è¡Œé¡ºåº" tabindex="-1"><a class="header-anchor" href="#ç­–ç•¥æ³¨å†Œå’Œæ‰§è¡Œé¡ºåº" aria-hidden="true">#</a> ç­–ç•¥æ³¨å†Œå’Œæ‰§è¡Œé¡ºåº</h4><p>ç»¼åˆæ¥çœ‹ï¼Œæˆ‘ä»¬åœ¨æ’ä»¶ä¸­çœ‹åˆ°äº†ç­–ç•¥çš„ä¸‰ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†ï¼š</p><ul><li>pluginContext.registerPolicy-å°†ç­–ç•¥æ³¨å†Œä¸ºæ’ä»¶çš„ä¸€éƒ¨åˆ†</li><li>ï¼ˆactionParamsï¼‰=&gt;ExpressJS_Middleware_Function-ä»ç®¡é“é…ç½®æä¾›å‚æ•°çš„åŒ…è£…å™¨</li><li>ï¼ˆreqï¼Œresï¼Œnextï¼‰=&gt;ï½›â€¦ï½-æ ‡å‡†ExpressJSä¸­é—´ä»¶</li></ul><p>ä¸»è¦åŒºåˆ«åœ¨äºæ‰§è¡Œè¿™äº›éƒ¨åˆ†çš„æ—¶é—´</p><h5 id="plugincontext-registerpolicy" tabindex="-1"><a class="header-anchor" href="#plugincontext-registerpolicy" aria-hidden="true">#</a> <code>pluginContext.registerPolicy</code></h5><ul><li>åœ¨Express Gatewayå¯åŠ¨æ—¶æ‰§è¡Œã€‚åœ¨æµæ°´çº¿å¼•æ“å’ŒhttpæœåŠ¡å™¨å¯åŠ¨ä¹‹å‰ã€‚</li><li>ä»…æ‰§è¡Œä¸€æ¬¡</li></ul><h5 id="actionparams-expressjs-middleware-function-å°è£…å™¨" tabindex="-1"><a class="header-anchor" href="#actionparams-expressjs-middleware-function-å°è£…å™¨" aria-hidden="true">#</a> <code>(actionParams) =&gt; ExpressJS_Middleware_Function</code> å°è£…å™¨</h5><ul><li>å½“æµæ°´çº¿å¼•æ“å°†ymlè½¬æ¢ä¸ºExpressJSä¸­é—´ä»¶æ—¶æ‰§è¡Œã€‚</li><li>åœ¨æ¯æ¬¡é…ç½®æ›´æ”¹æ—¶æ‰§è¡Œï¼ˆçƒ­é‡æ–°åŠ è½½gateway.configæ–‡ä»¶ï¼‰</li></ul><h5 id="req-res-next-ä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#req-res-next-ä¸­é—´ä»¶" aria-hidden="true">#</a> <code>(req,res,next) =&gt; { ... }</code> ä¸­é—´ä»¶</h5><ul><li>å¯¹å½“å‰æµæ°´çº¿ä¸­çš„æ¯ä¸ªè¯·æ±‚æ‰§è¡Œ</li></ul><h2 id="geteway-config-ymlæ–‡ä»¶è§£æ" tabindex="-1"><a class="header-anchor" href="#geteway-config-ymlæ–‡ä»¶è§£æ" aria-hidden="true">#</a> geteway.config.ymlæ–‡ä»¶è§£æ</h2><p>å®šä¹‰å¹¶æè¿°äº†ç½‘å…³çš„æ‰€æœ‰åŠŸèƒ½ï¼Œæ­¤é…ç½®æ–‡ä»¶ç®€è¦æè¿°äº†æ•´ä¸ªç½‘å…³çš„å¾®æœåŠ¡å’ŒAPIæ“ä½œ</p><h3 id="http" tabindex="-1"><a class="header-anchor" href="#http" aria-hidden="true">#</a> http</h3><p>é…ç½®httpï¼Œexpress gateway ç½‘å…³å°†åœ¨æŒ‡å®šç«¯å£ä¸Šç›‘å¬ http è¯·æ±‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">http</span><span class="token punctuation">:</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9080</span>            <span class="token comment"># åœ¨9080ä¸Šç›‘å¬è¯·æ±‚</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> localhost
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="https" tabindex="-1"><a class="header-anchor" href="#https" aria-hidden="true">#</a> https</h3><p>é…ç½®httpsï¼Œexpress gateway ç½‘å…³å°†åœ¨æŒ‡å®šç«¯å£ä¸Šç›‘å¬ https è¯·æ±‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">https</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9443</span>
  <span class="token key atrule">hostname</span><span class="token punctuation">:</span> localhost
  <span class="token key atrule">tls</span><span class="token punctuation">:</span>  <span class="token comment"># å¯†é’¥è¯ä¹¦å¯¹</span>
    <span class="token key atrule">&quot;*.demo.io&quot;</span><span class="token punctuation">:</span>
        <span class="token key atrule">key</span><span class="token punctuation">:</span> example/keys/demo.io.key.pem
        <span class="token key atrule">cert</span><span class="token punctuation">:</span> example/keys/demo.io.cert.pem
    <span class="token key atrule">&quot;api.acme.com&quot;</span><span class="token punctuation">:</span>
        <span class="token key atrule">key</span><span class="token punctuation">:</span> example/keys/acme.com.key.pem
        <span class="token key atrule">cert</span><span class="token punctuation">:</span> example/keys/acme.com.cert.pem
    <span class="token key atrule">&quot;default&quot;</span><span class="token punctuation">:</span>
        <span class="token key atrule">key</span><span class="token punctuation">:</span> example/keys/eg.io.key.pem
        <span class="token key atrule">cert</span><span class="token punctuation">:</span> example/keys/eg.io.cert.pem
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>express gatewayæ”¯æŒTLSï¼ŒåŒ…æ‹¬SNIï¼ˆç‰¹å®šäºåŸŸçš„TLSè¯ä¹¦ï¼‰ï¼Œæ¯ä¸ªtlså¯†é’¥éƒ½å¯ä»¥æŒ‡å®šä¸€ä¸ªä¸»æœºåŸŸï¼Œä¸»æœºåŸŸåŒ¹é…æ”¯æŒé€šé…ç¬¦ã€‚TLSå¯†é’¥å’Œè¯ä¹¦çš„è·¯å¾„åœ¨å¯†é’¥ä¸è¯ä¹¦å¯†é’¥ä¸­æˆå¯¹åˆ¶å®š</p><p>å¦‚æœå…¶ä»–tlsåŸŸæ¡ç›®éƒ½ä¸åŒ¹é…ï¼Œæˆ–è€…å®¢æˆ·ç«¯æ²¡æœ‰ä½¿ç”¨SNIï¼Œåˆ™å°†ä½¿ç”¨é»˜è®¤å¯†é’¥ã€‚</p><h3 id="admin" tabindex="-1"><a class="header-anchor" href="#admin" aria-hidden="true">#</a> admin</h3><p>adminéƒ¨åˆ†æ˜¯admin REST APIçš„å†…éƒ¨ç«¯ç‚¹ã€‚Express Gatewayå°†åœ¨æŒ‡å®šçš„ä¸»æœºå’Œç«¯å£ä¸Šä¾¦å¬å†…éƒ¨APIè¯·æ±‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">admin</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9080</span>            <span class="token comment"># EG will listen for http requests on port 9080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="apiendpoints" tabindex="-1"><a class="header-anchor" href="#apiendpoints" aria-hidden="true">#</a> apiEndpoints</h3><p>Express Gatewayé€šè¿‡ç§°ä¸ºapiEndpointsçš„URLå°†å¾®æœåŠ¡å…¬å¼€ä¸ºAPIã€‚APIæ¶ˆè´¹è€…å¯ä»¥é€šè¿‡APIç«¯ç‚¹è¿›è¡ŒAPIè¯·æ±‚ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiEndpoints</span><span class="token punctuation">:</span>
  <span class="token key atrule">help</span><span class="token punctuation">:</span>                 <span class="token comment"># åç§°ï¼Œç”¨ä½œæµæ°´çº¿ä¸­çš„å¼•ç”¨</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>           <span class="token comment"># å¿…å¡«é¡¹, &#39;*&#39; å°†ä¸ä¼šæ£€æŸ¥ä¸»æœºå</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span> /help        <span class="token comment"># é€‰å¡«ï¼Œé»˜è®¤æƒ…å†µä¸‹å°†ä¸ºæ‰€æœ‰è¯·æ±‚æä¾›æœåŠ¡ï¼Œä¸ * ç±»ä¼¼</span>

  <span class="token key atrule">api</span><span class="token punctuation">:</span>                  <span class="token comment"># åç§°ï¼Œç”¨ä½œæµæ°´çº¿ä¸­çš„å¼•ç”¨</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;*.com&#39;</span>       <span class="token comment"># æ”¯æŒé€šé…ç¬¦æ¨¡å¼</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&#39;/v1/*&#39;</span>         <span class="token comment"># å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„</span>
      <span class="token punctuation">-</span> <span class="token string">&#39;/v2/*&#39;</span>

  <span class="token key atrule">example</span><span class="token punctuation">:</span>              <span class="token comment"># åç§°ï¼Œç”¨ä½œæµæ°´çº¿ä¸­çš„å¼•ç”¨</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;example.com&#39;</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span> /v2/*        <span class="token comment"># å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„</span>

  <span class="token key atrule">example2</span><span class="token punctuation">:</span>              <span class="token comment"># å¯ä»¥åœ¨åŒä¸€apiEndpointä¸­æä¾›ä¸€ç»„åŒ¹é…æ¡ä»¶</span>
    <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;example2.com&#39;</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span> /v2/*
      <span class="token key atrule">methods</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;OPTIONS&quot;</span><span class="token punctuation">]</span>   <span class="token comment"># åŒ¹é…çš„æ–¹æ³•</span>
      <span class="token key atrule">scopes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;example2:read&quot;</span><span class="token punctuation">]</span>

    <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;example2.com&#39;</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span> /v2/*
      <span class="token key atrule">methods</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;PUT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;PATCH&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;DELETE&quot;</span><span class="token punctuation">]</span>
      <span class="token key atrule">scopes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;example2:write&quot;</span><span class="token punctuation">]</span>    <span class="token comment"># è®¿é—®æ­¤ç±»èµ„æºæ‰€éœ€çš„ä½œç”¨åŸŸæ•°ç»„</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é…ç½®" tabindex="-1"><a class="header-anchor" href="#é…ç½®" aria-hidden="true">#</a> é…ç½®ï¼š</h4><table><thead><tr><th style="text-align:left;">åç§°</th><th style="text-align:left;">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left;"><code>host</code></td><td style="text-align:left;">æ¥å—è¯·æ±‚çš„ä¸»æœºå</td></tr><tr><td style="text-align:left;"><code>paths</code></td><td style="text-align:left;">è·¯å¾„æ•°ç»„</td></tr><tr><td style="text-align:left;"><code>methods</code></td><td style="text-align:left;">è®¿é—®æ­¤ç±»èµ„æºæ‰€éœ€æ–¹æ³•æ•°ç»„</td></tr><tr><td style="text-align:left;"><code>scopes</code></td><td style="text-align:left;">è®¿é—®æ­¤ç±»èµ„æºæ‰€éœ€çš„ä½œç”¨åŸŸæ•°ç»„</td></tr></tbody></table><h4 id="host" tabindex="-1"><a class="header-anchor" href="#host" aria-hidden="true">#</a> Hostï¼š</h4><p>hostå€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†ä¸è¯·æ±‚çš„â€œhostâ€æ ‡å¤´ç›¸åŒ¹é…ã€‚</p><p>ç¤ºä¾‹:</p><p>ä»»ä½•åŸŸå’Œè·¯å¾„</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiEndpoints</span><span class="token punctuation">:</span>
  <span class="token key atrule">help</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span> /help
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒ¹é…: <code>cdn.test.example.com/help</code>, <code>example.com/help</code>, æ²¡æœ‰â€œHOSTâ€æ ‡å¤´404ï¼š <code>cdn.test.example.com</code>, <code>example.com/admin</code></p><p>ä¸€ä¸ªæ²¡æœ‰å­åŸŸå’Œè·¯å¾„çš„åŸŸ</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiEndpoints</span><span class="token punctuation">:</span>
  <span class="token key atrule">help</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;example.com&#39;</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span> /help
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒ¹é…: <code>example.com/help</code> 404: <code>test.example.com/help</code>, <code>example.com</code></p><p>ä¸€ä¸ªåŸŸå’Œè·¯å¾„çš„ä»»ä½•ä¸€çº§å­åŸŸ</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiEndpoints</span><span class="token punctuation">:</span>
  <span class="token key atrule">help</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;*.example.com&#39;</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span> /help
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="paths" tabindex="-1"><a class="header-anchor" href="#paths" aria-hidden="true">#</a> Paths</h4><p>è·¯å¾„å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„ã€‚æ”¯æŒé€šé…ç¬¦æ¨¡å¼ã€‚è·¯å¾„éµå¾ªExpressJSè·¯ç”±çº¦å®š-<a href="https://expressjs.com/en/4x/api.html#router" target="_blank" rel="noopener noreferrer">https://expressjs.com/en/4x/api.html#router<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ç¤ºä¾‹</p><p>ç²¾ç¡®å­—ç¬¦ä¸²åŒ¹é…</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span> /admin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>åŒ¹é…: åªæœ‰<code>/admin</code></li><li>404: <code>/admin/bob</code>; <code>/admin/charlie/1</code>; <code>/staff</code></li></ul><hr><p>æ²¡æœ‰çˆ¶çº§çš„æ·±å±‚åŒ¹é…</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span> /admin/*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>åŒ¹é…: <code>/admin/bob</code>; <code>/admin/charlie/1</code></li><li>404: <code>/admin</code></li></ul><hr><p>å¸¦æœ‰çˆ¶çº§çš„æ·±å±‚åŒ¹é…</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/admin&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;/admin/*&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>åŒ¹é…: <code>/admin</code>; <code>/admin/bob</code>; <code>/admin/charlie/1</code></li><li>404: <code>/staff</code></li></ul><hr><p>ä¸€çº§åŒ¹é…ï¼Œæ— çˆ¶çº§ï¼Œå˜é‡èµ‹å€¼</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span> <span class="token string">&#39;/admin/:id&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>åŒ¹é…: <code>/admin/bob</code>; <code>/admin/charlie</code></li><li>id: <code>bob</code>; <code>charlie</code></li><li>404: <code>/admin</code>; <code>/staff</code></li></ul><hr><p>å…·æœ‰å˜é‡åˆ†é…çš„ä¸å¸¦çˆ¶çº§çš„å¤šçº§å­ç›®å½•åŒ¹é…</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span> <span class="token string">&#39;/admin/:group/:id&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>åŒ¹é…: /admin/ops/bob</li><li>group: ops</li><li>id: bob</li><li>404: /admin; /admin/bob; /admin/alex/bob/charlie</li></ul><hr><p>æ— çˆ¶çº§çš„å¤šçº§å­ç›®å½•åŒ¹é…</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/student/*&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/teacher/*&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;/admin/*&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>åŒ¹é…: - <code>/admin/â€¦</code> multi-level - <code>/student/â€¦</code> multi-level - <code>/teacher/â€¦</code> multi-level</li><li>404: - <code>/</code> - <code>/admin</code>; <code>/teacher</code>; <code>/student</code> - <code>/staff</code></li></ul><hr><p>é‡å </p><p>APIç«¯ç‚¹æŒ‡å®šçš„é¡ºåºå¾ˆé‡è¦ã€‚å¯ä»¥é€šè¿‡é€šé…ç¬¦æŒ‡å®šé‡å æ¨¡å¼ã€‚åœ¨è¿›è¡Œæ›´ä¸€èˆ¬çš„åŒ¹é…ä¹‹å‰ï¼Œåº”é¦–å…ˆæŒ‡å®šæ›´å…·ä½“çš„æ¨¡å¼ä»¥è¿›è¡Œä¼˜å…ˆçº§è¯„ä¼°ã€‚</p><p>ç¤ºä¾‹</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiEndpoints</span><span class="token punctuation">:</span>
  <span class="token key atrule">tabby</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;*.tabby.cat.com&#39;</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>                <span class="token comment"># å¯é€‰ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸º*</span>
  <span class="token key atrule">cat</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;*.cat.com&#39;</span>
  <span class="token key atrule">com</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;*.com&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Scopes</p><p>â€œscopesâ€å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œç”¨äºæŒ‡å®šå½“å‰å‡­æ®è®¿é—®èµ„æºæ‰€éœ€çš„ä½œç”¨åŸŸã€‚</p><p>ç¤ºä¾‹</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiEndpoints</span><span class="token punctuation">:</span>
  <span class="token key atrule">tabby</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;*.tabby.cat.com&#39;</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>
    <span class="token key atrule">scopes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> read
      <span class="token punctuation">-</span> write
      <span class="token punctuation">-</span> delete
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åªæœ‰å½“å½“å‰ç”¨æˆ·å…·æœ‰â€œè¯»å–â€ã€â€œå†™å…¥â€å’Œâ€œåˆ é™¤â€ä½œç”¨åŸŸæ—¶ï¼Œæ‰èƒ½è®¿é—®ä»¥ä¸‹apiç«¯ç‚¹ã€‚</p><h3 id="serviceendpoints" tabindex="-1"><a class="header-anchor" href="#serviceendpoints" aria-hidden="true">#</a> serviceEndpoints</h3><p>Express Gatewayåœ¨apiEndpointsä¸Šæ¥æ”¶APIè¯·æ±‚ï¼Œå¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œç„¶åå°†å…¶ä»£ç†åˆ°ä¸‹æ¸¸å¾®æœåŠ¡ã€‚serviceEndpointséƒ¨åˆ†æŒ‡å®šäº†è¿™äº›ä»£ç†å¾®æœåŠ¡çš„URLã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">serviceEndpoints</span><span class="token punctuation">:</span>             <span class="token comment"># ä¸‹æ¸¸å¾®æœåŠ¡</span>
  <span class="token key atrule">cats</span><span class="token punctuation">:</span>                       <span class="token comment"># åç§°ï¼Œç”¨ä½œæµæ°´çº¿ä¸­çš„å¼•ç”¨</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">&quot;http://cats1.example.com&quot;</span>
  <span class="token key atrule">dogs</span><span class="token punctuation">:</span>                       <span class="token comment"># åç§°ï¼Œç”¨ä½œæµæ°´çº¿ä¸­çš„å¼•ç”¨</span>
    <span class="token key atrule">urls</span><span class="token punctuation">:</span>                     <span class="token comment"># å¤šä¸ªurlå¯ä»¥ç”¨äºè´Ÿè½½å‡è¡¡</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;http://dogs1.example.com&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;http://dogs2.example.com&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é…ç½®-1" tabindex="-1"><a class="header-anchor" href="#é…ç½®-1" aria-hidden="true">#</a> é…ç½®</h4><table><thead><tr><th style="text-align:left;">åç§°</th><th style="text-align:left;">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left;"><code>url</code></td><td style="text-align:left;">ä»£ç†è¯·æ±‚çš„åè®®å’Œä¸»æœºå</td></tr><tr><td style="text-align:left;"><code>urls</code></td><td style="text-align:left;">URLæ•°ç»„ï¼Œç”¨äºè´Ÿè½½å‡è¡¡</td></tr><tr><td style="text-align:left;"><code>proxyOptions</code></td><td style="text-align:left;">ç”¨äºè°ƒç”¨<a href="https://www.express-gateway.io/docs/policies/proxy/" target="_blank" rel="noopener noreferrer">proxy-policy<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>(ä»£ç†ç­–ç•¥)ï¼Œä½¿ç”¨æ­¤æœåŠ¡ç«¯ç‚¹</td></tr></tbody></table><p>serviceEndpointå¿…é¡»å…·æœ‰å¸¦æœ‰å•ä¸ªå­—ç¬¦ä¸²çš„urlå±æ€§æˆ–å¸¦æœ‰å­—ç¬¦ä¸²æ•°ç»„çš„urlså±æ€§</p><h3 id="policies" tabindex="-1"><a class="header-anchor" href="#policies" aria-hidden="true">#</a> policies</h3><p>ç­–ç•¥éƒ¨åˆ†æ˜¯å·²å¯ç”¨ç­–ç•¥çš„ç™½åå•ã€‚å¿…é¡»åœ¨æ­¤å¤„å£°æ˜Express Gatewayè¦ä½¿ç”¨çš„ç­–ç•¥ã€‚æœ‰å…³Express Gatewayæ”¯æŒçš„æ‰€æœ‰ç­–ç•¥ï¼Œè¯·å‚é˜…â€œç­–ç•¥å‚è€ƒ&quot;</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">policies</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> cors
  <span class="token punctuation">-</span> rate<span class="token punctuation">-</span>limiter
  <span class="token punctuation">-</span> log
  <span class="token punctuation">-</span> proxy
  <span class="token punctuation">-</span> oauth2
  <span class="token punctuation">-</span> key<span class="token punctuation">-</span>auth
  <span class="token punctuation">-</span> basic<span class="token punctuation">-</span>auth
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®</p><table><thead><tr><th style="text-align:left;">åå­—</th><th style="text-align:left;">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left;"><code>name</code></td><td style="text-align:left;">policyçš„åç§°ï¼Œä¹Ÿæ˜¯<code>/lib/policysä¸‹å¯¹åº”çš„ç›®å½•å</code></td></tr></tbody></table><h3 id="pipelines" tabindex="-1"><a class="header-anchor" href="#pipelines" aria-hidden="true">#</a> pipelines</h3><p>æµæ°´çº¿éƒ¨åˆ†é€šè¿‡è¯·æ±‚å’Œå“åº”æµå°†ä¸Šé¢éƒ¨åˆ†ä¸­å£°æ˜çš„æ‰€æœ‰å®ä½“ç»‘å®šåœ¨ä¸€èµ·ï¼Œä»è€ŒæŒ‡å®šæ ¸å¿ƒExpress Gatewayçš„æ“ä½œã€‚</p><p>æµæ°´çº¿æ˜¯ä¸ºä»æ‰€æœ‰é“¾æ¥çš„apiEndpointæ¥æ”¶çš„è¯·æ±‚æ‰§è¡Œçš„ç­–ç•¥çš„æœ‰åºåˆ—è¡¨ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">pipelines</span><span class="token punctuation">:</span>
  <span class="token key atrule">pipeline_1</span><span class="token punctuation">:</span>                   <span class="token comment"># æµæ°´çº¿çš„åå­—</span>
    <span class="token key atrule">apiEndpoints</span><span class="token punctuation">:</span>               <span class="token comment"># æŒ‰åç§°å¼•ç”¨çš„ API endpoints</span>
      <span class="token punctuation">-</span> api1                    <span class="token comment"># ç¤ºä¾‹apiEndpointåç§°</span>
      <span class="token punctuation">-</span> api2
      <span class="token punctuation">-</span> api3
    <span class="token key atrule">policies</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span>
        <span class="token punctuation">-</span> policy_1
          <span class="token punctuation">-</span>
            <span class="token comment">#condition/action</span>
          <span class="token punctuation">-</span>
            <span class="token comment">#condition/action</span>
        <span class="token punctuation">-</span> policy_2
          <span class="token punctuation">-</span>
            <span class="token comment">#condition/action</span>
          <span class="token punctuation">-</span>
            <span class="token comment">#condition/action</span>
  pipeline_2
  .
  .
  .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¤ºä¾‹</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">http</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3000</span>

<span class="token key atrule">serviceEndpoints</span><span class="token punctuation">:</span>
  <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token comment"># å°†åœ¨ä»£ç†ç­–ç•¥ä¸­å¼•ç”¨</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">&#39;http://example.com&#39;</span>

<span class="token key atrule">apiEndpoints</span><span class="token punctuation">:</span>
  <span class="token key atrule">api</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span> /

<span class="token key atrule">pipelines</span><span class="token punctuation">:</span>
  <span class="token key atrule">default</span><span class="token punctuation">:</span>
    <span class="token key atrule">apiEndpoints</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> api
    <span class="token key atrule">policies</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span>
        <span class="token key atrule">simple-logger</span><span class="token punctuation">:</span> <span class="token comment"># ç­–ç•¥åç§°</span>
          <span class="token punctuation">-</span>   <span class="token comment"># æ¡ä»¶\åŠ¨ä½œå±æ€§çš„å¯¹è±¡æ•°ç»„</span>
            <span class="token key atrule">condition</span><span class="token punctuation">:</span> <span class="token comment">#å¯é€‰; é»˜è®¤ä¸ºå§‹ç»ˆæ‰§è¡Œ</span>
              <span class="token key atrule">name</span><span class="token punctuation">:</span> pathExact
              <span class="token key atrule">path</span><span class="token punctuation">:</span> /v1
            <span class="token key atrule">action</span><span class="token punctuation">:</span>
              <span class="token key atrule">message</span><span class="token punctuation">:</span> <span class="token string">&quot;${req.method} ${req.originalUrl}&quot;</span>
      <span class="token punctuation">-</span>
        <span class="token key atrule">proxy</span><span class="token punctuation">:</span> <span class="token comment"># ç­–ç•¥åç§°</span>
          <span class="token punctuation">-</span>    <span class="token comment"># æ¡ä»¶\åŠ¨ä½œå±æ€§çš„å¯¹è±¡æ•°ç»„</span>
            <span class="token key atrule">action</span><span class="token punctuation">:</span>
              <span class="token key atrule">serviceEndpoint</span><span class="token punctuation">:</span> example <span class="token comment"># è§ä¸Šæ–‡å£°æ˜</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç­–ç•¥ä¸­çš„æ¡ä»¶å’ŒåŠ¨ä½œå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#ç­–ç•¥ä¸­çš„æ¡ä»¶å’ŒåŠ¨ä½œå¯¹è±¡" aria-hidden="true">#</a> ç­–ç•¥ä¸­çš„æ¡ä»¶å’ŒåŠ¨ä½œå¯¹è±¡</h4><p>ç­–ç•¥åŒ…å«ä¸€ä¸ªå¸¦æœ‰å‚æ•°çš„æ“ä½œåˆ—è¡¨ã€‚æ¯ä¸ªæ“ä½œéƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªæ¡ä»¶è¢«æ§ã€‚</p><table><thead><tr><th style="text-align:left;">åç§°</th><th style="text-align:left;">å¿…å¡«</th><th style="text-align:left;">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left;"><code>condition</code></td><td style="text-align:left;">é€‰å¡«</td><td style="text-align:left;">å¿…é¡»æ»¡è¶³æ‰èƒ½è§¦å‘å…¶ç›¸åº”æ“ä½œçš„è§„åˆ™</td></tr><tr><td style="text-align:left;"><code>action</code></td><td style="text-align:left;"></td><td style="text-align:left;">æ­¤ç‰¹å®šæ­¥éª¤çš„æ“ä½œå‚æ•°</td></tr></tbody></table><p>æ¡ä»¶å’Œæ“ä½œéƒ½æœ‰è‡ªå·±çš„å‚æ•°åˆ—è¡¨ã€‚æ¯ä¸ªæ¡ä»¶/åŠ¨ä½œå¯¹éƒ½æ˜¯ç‹¬ç«‹äºå…¶ä»–æ¡ä»¶/åŠ¨ä½œæ‰§è¡Œçš„ã€‚æ‰§è¡Œé¡ºåºä¸ç­–ç•¥ä¸­çš„å£°æ˜ç›¸åŒ</p><p>ç¤ºä¾‹</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">pipelines</span><span class="token punctuation">:</span>
  <span class="token key atrule">default</span><span class="token punctuation">:</span>
    <span class="token key atrule">apiEndpoints</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> api
    <span class="token key atrule">policies</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span>
        <span class="token key atrule">simple-logger</span><span class="token punctuation">:</span> <span class="token comment"># ç­–ç•¥åç§°</span>
          <span class="token punctuation">-</span>   <span class="token comment"># å¯ç”±æ¡ä»¶é€‰é€šçš„æ“ä½œæ•°ç»„</span>
            <span class="token key atrule">condition</span><span class="token punctuation">:</span> <span class="token comment"># åªæœ‰å½“è·¯å¾„æ°å¥½ä¸º/v1æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œæ­¤æ“ä½œ</span>
              <span class="token key atrule">name</span><span class="token punctuation">:</span> pathExact
              <span class="token key atrule">path</span><span class="token punctuation">:</span> /v1
            <span class="token key atrule">action</span><span class="token punctuation">:</span>
              <span class="token key atrule">message</span><span class="token punctuation">:</span> <span class="token string">&quot;V1: ${req.originalUrl}&quot;</span>
          <span class="token punctuation">-</span>  <span class="token comment"># ä»…åœ¨ä¸Šä¸€ä¸ªæ“ä½œå®Œæˆåæ‰§è¡Œ</span>
            <span class="token key atrule">condition</span><span class="token punctuation">:</span> <span class="token comment"># åªæœ‰å½“è·¯å¾„æ°å¥½ä¸º/v2æ—¶æ‰æ‰§è¡Œæ­¤æ“ä½œ</span>
              <span class="token key atrule">name</span><span class="token punctuation">:</span> pathExact
              <span class="token key atrule">path</span><span class="token punctuation">:</span> /v2
            <span class="token key atrule">action</span><span class="token punctuation">:</span>
              <span class="token key atrule">message</span><span class="token punctuation">:</span> <span class="token string">&quot;V2: ${req.originalUrl}&quot;</span>
          <span class="token punctuation">-</span>  <span class="token comment"># ä»…åœ¨å‰ä¸¤ä¸ªæ“ä½œå®Œæˆåæ‰§è¡Œ</span>
            <span class="token key atrule">action</span><span class="token punctuation">:</span> <span class="token comment"># æ— æ¡ä»¶ï¼Œå§‹ç»ˆæ‰§è¡Œ</span>
              <span class="token key atrule">message</span><span class="token punctuation">:</span> <span class="token string">&quot;GENERIC: ${req.method}&quot;</span>
      <span class="token punctuation">-</span>
        <span class="token key atrule">proxy</span><span class="token punctuation">:</span> <span class="token comment"># ç­–ç•¥åç§°</span>
          <span class="token punctuation">-</span>    <span class="token comment"># å…·æœ‰æ¡ä»¶\æ“ä½œå±æ€§çš„å¯¹è±¡æ•°ç»„</span>
            <span class="token key atrule">action</span><span class="token punctuation">:</span>
              <span class="token key atrule">serviceEndpoint</span><span class="token punctuation">:</span> example
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/src/å…¶ä»–/express-gatewayç½‘å…³.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: a18733972792@163.com">guoyz</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright Â© 2023 guoyz</div></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-d0b2b34c.js" defer></script>
  </body>
</html>
